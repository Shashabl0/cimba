<!DOCTYPE html>
<html lang="en" ng-app="CimbaApp">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
<meta charset="utf-8">
<title>Cimba</title>
<meta name="generator" content="Cimba">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!-- prod
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
-->
<!-- dev -->
<link href="dev/css/bootstrap.min.css" rel="stylesheet">
<link href="dev/css/font-awesome.min.css" rel="stylesheet">
<!-- local -->
<link href="css/style.css" rel="stylesheet">
<link href="css/proxima-nova.css" rel="stylesheet">

<!-- prod
<script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type='text/javascript' src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.js"></script>
-->
<!-- dev -->
<script type='text/javascript' src="dev/js/jquery.min.js"></script>
<script type='text/javascript' src="dev/js/bootstrap.min.js"></script>
<script type="text/javascript" src="dev/js/jquery-ui.js"></script>

<script src="dev/js/angular.min.js"></script>
<script src="dev/js/angular-ui.min.js"></script> 
<!-- local -->
<script type='text/javascript' src="js/jquery.notify.js"></script>
<script type='text/javascript' src="js/rdflib.min.js"></script>
<script type='text/javascript' src="js/common.js"></script>
<script type="text/javascript" src="js/moment.min.js"></script>
<script type='text/javascript' src="js/app.js"></script>

<!--[if lt IE 9]>
  <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
    
<link rel="shortcut icon" type="img/png" href="favicon.png">
</head>
    
<body>
<div ng-controller="CimbaCtrl">
    <div ng-cloak class="navbar navbar-default" id="subnav">
        <div class="col-md-12">
            <div class="navbar-header">
                <img src="img/cimba-logo.png" class="logo">
                <button id="menuToggle" type="button" class="navbar-toggle pull-right" data-toggle="collapse" data-target="#navbar-collapse2">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            
            <!-- <a href="#" onclick="notify('Post', 'Your post was succesfully submitted!')">Notif</a> -->

            <div class="collapse navbar-collapse" id="navbar-collapse2">
            <ul class="nav navbar-nav navbar-right">
                <li class="active"><a href="#"><span class="icon-home"></span> Home</a></li>
                <li><a href="#"><i class="icon-refresh"></i> Refresh </a></li>
                <li ng-hide="loggedin"><a href="#loginModal" role="button" data-toggle="modal"><span class="icon-signin"></span> Login</a></li>
                <li ng-show="loggedin"><a href="#" ng-click="clearSession()" role="button"><span class="icon-signout"></span> Logout</a></li>
            </ul>
            </div>
        </div>	
    </div>

    <!--main-->
    <!-- NEW -->
    <div class="container" id="newpost">
        <div class="row">
            <div class="clear-70"></div>
            <div class="col-md-12">
                <!-- new post -->
                <div class="panel panel-default" ng-show="loggedin"> 
                    <div class="panel-heading dark-blue">
                        <div class="pull-left">
                            <a id="mypic" class="thumbnail pull-right" href="#">
                              <img class="media-object" src="img/photo.png" rel="tooltip" data-placement="top" title="Name">
                            </a>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="panel-body-textmail">
                          <form>
                            <h3 class="bold">What's new, {{user.myname}}?</h3>
                              
                            <textarea name="message" ng-model="postbody" class="form-control message" placeholder="Type your message here.." required></textarea>
                         
                            <div class="btn-group">
                                <button id="audience" ng-model="audience" class="btn btn-classic"><i class="{{audience}} icon-2x blue"></i></button><button class="btn dropdown-toggle" data-toggle="dropdown" data-target="#" href="#"> <small class="drop"><i class="icon-chevron-down icon-2x"></i></small></button>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="audience">
                                    <li><a href="#" ng-click="setAudience('public')"><i id="public" class="icon-globe icon-2x blue"></i> Public</a></li>
                                    <li><a href="#" ng-click="setAudience('private')">&nbsp;<i id="private" class="icon-lock icon-2x blue"></i>&nbsp; Private</a></li>
                                    <li><a href="#" ng-click="setAudience('friends')"><i id="friends" class="icon-user icon-2x blue"></i> Friends</a></li>
                                </ul>
                            </div>
                            <div class="btn-group">
                                <input type="button" id="chs" class="btn btn-classic" value="{{defaultChannel.title}}"><button class="btn dropdown-toggle" data-toggle="dropdown" data-target="#" href="#"> <small class="drop"><i class="icon-chevron-down icon-2x"></i></small></button>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="chs">
                                    <li ng-repeat="channel in user.channels">
                                        <a href="#" ng-click="setChannel(channel.title)">{{channel.title}}</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-classic" rel="tooltip" data-placement="top" title="Add a photo"><i class="icon-camera  icon-2x green"></i></button>
                            </div>
                            <div class="pull-right">
                                
                                <button class="btn btn-primary pull-right" ng-click="newPost()" ng-disabled="!postbody">Publish</button>
                            </div>
                          </form>
                        </div>
                    </div>
                </div>
                <!-- end new post -->
            </div>
        </div>
    </div>

    <div id="posts" class="container">
        <div class="row">
            <div class="col-md-12">
                <!-- All posts go into <posts-viewer> -->
                <posts-viewer ng-show="loggedin"></posts-viewer>
                <div class="panel panel-default" ng-show="loading">
                    <div id="spinner"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-md-12 text-center">
    <hr>
    <p>Powered by <a href="https://github.com/social-webarch/cimba" target="_blank">CIMBA</a> v1.0 alpha</p>
</div>
<!--/main-->

<!-- set the container hidden when the page first loads -->
<div id="notification" style="display:none">
    <!-- 
    Later on, you can choose which template to use by referring to the 
    ID assigned to each template.  Alternatively, you could refer
    to each template by index, so in this example, "basic-tempate" is
    index 0 and "advanced-template" is index 1.
    -->
    <div id="basic-template">
        <a class="ui-notify-cross ui-notify-close" href="#">x</a>
        <h1>#{title}</h1>
        <p>#{text}</p>
    </div>
</div>

<!--login modal-->
<div id="loginModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h2 class="text-center">Login / Sign Up</h2>
      </div>
      <div class="modal-body">
          <!-- <div id="login-body"></div> -->
          
          <iframe id="signup" src="" sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0" width="390" height="430"></iframe>
          
      </div>
      <div class="modal-footer">
          <div class="col-md-12">
              <button class="btn btn-info" data-dismiss="modal" aria-hidden="true">Cancel</button>
		      </div>	
      </div>
  </div>
  </div>
</div>

<!--about modal-->
<div id="aboutModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h2 class="text-center">About</h2>
      </div>
      <div class="modal-body">
          <div class="col-md-12 text-center">
            <h3>This microblogging app is powered by <a href="#">Cimba v1.0 alpha</a></h3>
            <br>UI design by <a href="#">Andrei Sambra</a>
            <br><br>
            <a href="#">GitHub Fork</a>
          </div>
      </div>
      <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">OK</button>
      </div>
  </div>
  </div>
</div>

<script type='text/javascript'>
$(document).ready(function() {
    /* toggle layout */
    $('#btnToggle').click(function(){
        if ($(this).hasClass('on')) {
            $('#main .col-md-6').addClass('col-md-4').removeClass('col-md-6');
            $(this).removeClass('on');
        }
        else {
            $('#main .col-md-4').addClass('col-md-6').removeClass('col-md-4');
            $(this).addClass('on');
        }
    });
    // auto close menu after click
    $(document).click(function () {
        if (!$("#menuToggle").hasClass('collapsed')) {
            $('.navbar-collapse').collapse('hide');
        }
    });

    // load login/signup
    //$('#login-body').load("//example.org/onboard/signup.html");
    //angular.bootstrap(document.getElementById('ob-app'), ['ob-app']);

    // init tooltip plugin
    $('#audience').tooltip();

    // set the parameter in the src of iframe
    document.getElementById('signup').src = '//linkeddata.github.io/signup/index.html?ref='+window.location.protocol+'//'+window.location.host;
});
</script>

</body>
</html>
